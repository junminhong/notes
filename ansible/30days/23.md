# Day23 - CI/CD æ•´åˆ

## ä»Šæ—¥ç›®æ¨™
- äº†è§£ CI/CD çš„æ ¸å¿ƒæ¦‚å¿µèˆ‡å„ªå‹¢
- æŒæ¡ Jenkins èˆ‡ Ansible çš„æ•´åˆæ‡‰ç”¨
- å­¸æœƒè¨­è¨ˆ GitLab CI/CD Pipeline
- å»ºç«‹å®Œæ•´çš„è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹

## ç‚ºä»€éº¼éœ€è¦ CI/CD æ•´åˆï¼Ÿ

åœ¨ç¾ä»£è»Ÿé«”é–‹ç™¼ä¸­ï¼ŒCI/CDï¼ˆæŒçºŒæ•´åˆ/æŒçºŒéƒ¨ç½²ï¼‰å·²ç¶“æˆç‚ºå¿…å‚™çš„å¯¦å‹™ï¼š

**æŒçºŒæ•´åˆ (Continuous Integration)**ï¼š
- è‡ªå‹•åŒ–ä»£ç¢¼åˆä½µå’Œæ¸¬è©¦
- åŠæ—©ç™¼ç¾æ•´åˆå•é¡Œ
- ç¢ºä¿ä»£ç¢¼å“è³ªä¸€è‡´æ€§

**æŒçºŒéƒ¨ç½² (Continuous Deployment)**ï¼š
- è‡ªå‹•åŒ–éƒ¨ç½²æµç¨‹
- æ¸›å°‘äººç‚ºéŒ¯èª¤
- å¿«é€Ÿäº¤ä»˜æ–°åŠŸèƒ½

Ansible åœ¨ CI/CD æµç¨‹ä¸­æ‰®æ¼”é—œéµè§’è‰²ï¼š
- **åŸºç¤è¨­æ–½å³ä»£ç¢¼**ï¼šç¢ºä¿ç’°å¢ƒä¸€è‡´æ€§
- **å¤šç’°å¢ƒç®¡ç†**ï¼šçµ±ä¸€çš„éƒ¨ç½²æµç¨‹
- **å†ªç­‰æ€§**ï¼šå®‰å…¨çš„é‡è¤‡åŸ·è¡Œ
- **è±å¯Œçš„æ¨¡çµ„**ï¼šæ”¯æ´å„ç¨®éƒ¨ç½²éœ€æ±‚

## Jenkins èˆ‡ Ansible æ•´åˆ

### 1. Jenkins ç’°å¢ƒæº–å‚™

**å®‰è£ Ansible æ’ä»¶**ï¼š
```bash
# åœ¨ Jenkins ä¸­å®‰è£ Ansible Plugin
# ç®¡ç† Jenkins â†’ ç®¡ç†æ’ä»¶ â†’ å¯ç”¨æ’ä»¶ â†’ æœå°‹ "Ansible"
```

**é…ç½® Ansible å·¥å…·**ï¼š
```bash
# å…¨åŸŸå·¥å…·é…ç½® â†’ Ansible installations
# Name: ansible
# Path to ansible executables directory: /usr/local/bin/
```

### 2. Jenkins Pipeline èˆ‡ Ansible

**Declarative Pipeline** (`Jenkinsfile`)ï¼š
```groovy
pipeline {
    agent any

    environment {
        ANSIBLE_HOST_KEY_CHECKING = 'False'
        ANSIBLE_FORCE_COLOR = 'true'
    }

    parameters {
        choice(
            name: 'ENVIRONMENT',
            choices: ['dev', 'staging', 'prod'],
            description: 'é¸æ“‡éƒ¨ç½²ç’°å¢ƒ'
        )
        string(
            name: 'VERSION',
            defaultValue: 'latest',
            description: 'æ‡‰ç”¨ç¨‹å¼ç‰ˆæœ¬'
        )
    }

    stages {
        stage('Checkout') {
            steps {
                git branch: 'main', url: 'https://github.com/your-org/ansible-playbooks.git'
            }
        }

        stage('Lint Check') {
            steps {
                sh '''
                    ansible-lint playbooks/
                    yamllint .
                '''
            }
        }

        stage('Syntax Check') {
            steps {
                ansiblePlaybook(
                    playbook: 'playbooks/site.yml',
                    inventory: "inventories/${params.ENVIRONMENT}/inventory.ini",
                    extras: '--syntax-check'
                )
            }
        }

        stage('Deploy') {
            steps {
                ansiblePlaybook(
                    playbook: 'playbooks/site.yml',
                    inventory: "inventories/${params.ENVIRONMENT}/inventory.ini",
                    extras: "--extra-vars 'app_version=${params.VERSION}'",
                    credentialsId: 'ansible-vault-password'
                )
            }
        }

        stage('Verify Deployment') {
            steps {
                ansiblePlaybook(
                    playbook: 'playbooks/verify.yml',
                    inventory: "inventories/${params.ENVIRONMENT}/inventory.ini"
                )
            }
        }

        stage('Notify') {
            steps {
                script {
                    if (currentBuild.result == 'SUCCESS') {
                        slackSend(
                            color: 'good',
                            message: "âœ… éƒ¨ç½²æˆåŠŸ: ${env.JOB_NAME} - ${params.ENVIRONMENT} - ${params.VERSION}"
                        )
                    } else {
                        slackSend(
                            color: 'danger',
                            message: "âŒ éƒ¨ç½²å¤±æ•—: ${env.JOB_NAME} - ${params.ENVIRONMENT}"
                        )
                    }
                }
            }
        }
    }

    post {
        always {
            cleanWs()
        }
        failure {
            emailext(
                subject: "éƒ¨ç½²å¤±æ•—: ${env.JOB_NAME} - ${env.BUILD_NUMBER}",
                body: "éƒ¨ç½²åˆ° ${params.ENVIRONMENT} ç’°å¢ƒå¤±æ•—ï¼Œè«‹æª¢æŸ¥ Jenkins æ—¥èªŒã€‚",
                to: "devops@company.com"
            )
        }
    }
}
```

### 3. Jenkins ä½œæ¥­é…ç½®

**è‡ªç”±å¼å°ˆæ¡ˆé…ç½®**ï¼š
```bash
# å»ºç½®è§¸ç™¼å™¨
- GitHub hook trigger for GITScm polling
- Poll SCM: H/5 * * * *  # æ¯5åˆ†é˜æª¢æŸ¥ä¸€æ¬¡

# å»ºç½®ç’°å¢ƒ
- Delete workspace before build starts
- Abort the build if it's stuck (Timeout: 30 minutes)

# å»ºç½®æ­¥é©Ÿ
1. Execute shell:
   ansible-lint playbooks/

2. Invoke Ansible Playbook:
   Playbook path: playbooks/site.yml
   Inventory: inventories/$ENVIRONMENT/inventory.ini
   Vault Credentials: ansible-vault-password
   Extra Variables: app_version=$VERSION environment=$ENVIRONMENT
```

## GitLab CI/CD æ•´åˆ

### 1. GitLab CI é…ç½®

**`.gitlab-ci.yml` å®Œæ•´ç¯„ä¾‹**ï¼š
```yaml
stages:
  - validate
  - test
  - deploy-dev
  - deploy-staging
  - deploy-prod

variables:
  ANSIBLE_HOST_KEY_CHECKING: "False"
  ANSIBLE_FORCE_COLOR: "true"

# æ¨¡æ¿å®šç¾©
.ansible_template: &ansible_template
  image: cytopia/ansible:latest
  before_script:
    - apk add --no-cache openssh-client
    - eval $(ssh-agent -s)
    - echo "$SSH_PRIVATE_KEY" | tr -d '\r' | ssh-add -
    - mkdir -p ~/.ssh && chmod 700 ~/.ssh
    - echo "$SSH_KNOWN_HOSTS" > ~/.ssh/known_hosts
    - echo "$ANSIBLE_VAULT_PASSWORD" > .vault_pass

# ä»£ç¢¼é©—è­‰éšæ®µ
lint:
  stage: validate
  image: cytopia/ansible:latest
  script:
    - ansible-lint playbooks/
    - yamllint .
  only:
    - merge_requests
    - main

syntax_check:
  stage: validate
  <<: *ansible_template
  script:
    - ansible-playbook playbooks/site.yml
      -i inventories/dev/inventory.ini
      --syntax-check
      --vault-password-file .vault_pass
  only:
    - merge_requests
    - main

# æ¸¬è©¦éšæ®µ
molecule_test:
  stage: test
  image: cytopia/ansible:latest
  services:
    - docker:dind
  before_script:
    - apk add --no-cache docker py3-pip
    - pip install molecule[docker]
  script:
    - molecule test
  only:
    - merge_requests

# éƒ¨ç½²éšæ®µ
deploy_dev:
  stage: deploy-dev
  <<: *ansible_template
  script:
    - ansible-playbook playbooks/site.yml
      -i inventories/dev/inventory.ini
      --vault-password-file .vault_pass
      --extra-vars "app_version=$CI_COMMIT_SHA environment=development"
  environment:
    name: development
    url: https://dev.example.com
  only:
    - main
  when: manual

deploy_staging:
  stage: deploy-staging
  <<: *ansible_template
  script:
    - ansible-playbook playbooks/site.yml
      -i inventories/staging/inventory.ini
      --vault-password-file .vault_pass
      --extra-vars "app_version=$CI_COMMIT_TAG environment=staging"
  environment:
    name: staging
    url: https://staging.example.com
  only:
    - tags
  when: manual

deploy_prod:
  stage: deploy-prod
  <<: *ansible_template
  script:
    - ansible-playbook playbooks/site.yml
      -i inventories/prod/inventory.ini
      --vault-password-file .vault_pass
      --extra-vars "app_version=$CI_COMMIT_TAG environment=production"
    - ansible-playbook playbooks/verify.yml
      -i inventories/prod/inventory.ini
  environment:
    name: production
    url: https://app.example.com
  only:
    - tags
  when: manual
  allow_failure: false

# éƒ¨ç½²å¾Œé€šçŸ¥
notify_success:
  stage: deploy-prod
  image: alpine:latest
  before_script:
    - apk add --no-cache curl
  script:
    - |
      curl -X POST -H 'Content-type: application/json' \
      --data "{\"text\":\"âœ… ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²æˆåŠŸ: $CI_COMMIT_TAG\"}" \
      $SLACK_WEBHOOK_URL
  only:
    - tags
  when: on_success
```

### 2. GitLab Variables é…ç½®

**å°ˆæ¡ˆè®Šæ•¸è¨­å®š**ï¼š
```bash
# Settings â†’ CI/CD â†’ Variables
SSH_PRIVATE_KEY: [Protected, Masked]
SSH_KNOWN_HOSTS: [Protected]
ANSIBLE_VAULT_PASSWORD: [Protected, Masked]
SLACK_WEBHOOK_URL: [Protected, Masked]
```

## é€²éš CI/CD æ¨¡å¼

### 1. å¤šåˆ†æ”¯éƒ¨ç½²ç­–ç•¥

**åŸºæ–¼åˆ†æ”¯çš„ç’°å¢ƒæ˜ å°„**ï¼š
```yaml
# .gitlab-ci.yml åˆ†æ”¯ç­–ç•¥
.deploy_template: &deploy_template
  <<: *ansible_template
  script:
    - |
      if [ "$CI_COMMIT_REF_NAME" = "main" ]; then
        ENVIRONMENT="dev"
      elif [ "$CI_COMMIT_REF_NAME" = "release" ]; then
        ENVIRONMENT="staging"
      elif [[ "$CI_COMMIT_REF_NAME" =~ ^v[0-9]+\.[0-9]+\.[0-9]+$ ]]; then
        ENVIRONMENT="prod"
      else
        echo "Unknown branch/tag pattern"
        exit 1
      fi

      ansible-playbook playbooks/site.yml \
        -i inventories/$ENVIRONMENT/inventory.ini \
        --vault-password-file .vault_pass \
        --extra-vars "app_version=$CI_COMMIT_SHA environment=$ENVIRONMENT"

deploy_auto:
  stage: deploy
  <<: *deploy_template
  rules:
    - if: $CI_COMMIT_REF_NAME == "main"
      variables:
        ENVIRONMENT: "dev"
    - if: $CI_COMMIT_REF_NAME == "release"
      variables:
        ENVIRONMENT: "staging"
      when: manual
    - if: $CI_COMMIT_TAG =~ /^v[0-9]+\.[0-9]+\.[0-9]+$/
      variables:
        ENVIRONMENT: "prod"
      when: manual
```

### 2. è—ç¶ éƒ¨ç½² CI/CD æ•´åˆ

**Jenkins Pipeline è—ç¶ éƒ¨ç½²**ï¼š
```groovy
stage('Blue-Green Deployment') {
    steps {
        script {
            // éƒ¨ç½²åˆ° Green ç’°å¢ƒ
            ansiblePlaybook(
                playbook: 'playbooks/blue-green-deploy.yml',
                inventory: "inventories/${params.ENVIRONMENT}/inventory.ini",
                extras: "--extra-vars 'target_color=green app_version=${params.VERSION}'"
            )

            // å¥åº·æª¢æŸ¥
            def healthCheck = ansiblePlaybook(
                playbook: 'playbooks/health-check.yml',
                inventory: "inventories/${params.ENVIRONMENT}/inventory.ini",
                extras: "--extra-vars 'target_color=green'"
            )

            if (healthCheck.result == 'SUCCESS') {
                // åˆ‡æ›æµé‡åˆ° Green
                ansiblePlaybook(
                    playbook: 'playbooks/switch-traffic.yml',
                    inventory: "inventories/${params.ENVIRONMENT}/inventory.ini",
                    extras: "--extra-vars 'active_color=green'"
                )

                // åœæ­¢ Blue ç’°å¢ƒ
                ansiblePlaybook(
                    playbook: 'playbooks/cleanup-blue.yml',
                    inventory: "inventories/${params.ENVIRONMENT}/inventory.ini"
                )
            } else {
                error("Health check failed, aborting deployment")
            }
        }
    }
}
```

### 3. API æ•´åˆèˆ‡é€šçŸ¥

**åœ¨ Playbook ä¸­æ•´åˆ API å‘¼å«**ï¼š
```yaml
---
- name: CI/CD Integration with API calls
  hosts: localhost
  connection: local
  vars:
    deployment_start_time: "{{ ansible_date_time.epoch }}"

  tasks:
    # éƒ¨ç½²é–‹å§‹é€šçŸ¥
    - name: Notify deployment start
      uri:
        url: "{{ slack_webhook_url }}"
        method: POST
        body_format: json
        body:
          text: "ğŸš€ é–‹å§‹éƒ¨ç½² {{ app_name }} v{{ app_version }} åˆ° {{ environment }}"
          attachments:
            - color: "warning"
              fields:
                - title: "ç‰ˆæœ¬"
                  value: "{{ app_version }}"
                  short: true
                - title: "ç’°å¢ƒ"
                  value: "{{ environment }}"
                  short: true
                - title: "åŸ·è¡Œè€…"
                  value: "{{ ansible_user_id }}"
                  short: true

    # è§¸ç™¼ GitLab Pipeline
    - name: Trigger related pipeline
      uri:
        url: "https://gitlab.com/api/v4/projects/{{ gitlab_project_id }}/trigger/pipeline"
        method: POST
        headers:
          PRIVATE-TOKEN: "{{ gitlab_token }}"
        body_format: json
        body:
          ref: "{{ git_branch }}"
          variables:
            TRIGGER_SOURCE: "ansible"
            ENVIRONMENT: "{{ environment }}"
      register: pipeline_result
      when: trigger_pipeline | default(false)

    # éƒ¨ç½²å®Œæˆå¾Œé©—è­‰
    - name: Wait for application to be ready
      uri:
        url: "{{ app_health_url }}"
        method: GET
        status_code: 200
      register: health_check
      until: health_check.status == 200
      retries: 30
      delay: 10

    # éƒ¨ç½²æˆåŠŸé€šçŸ¥
    - name: Notify deployment success
      uri:
        url: "{{ slack_webhook_url }}"
        method: POST
        body_format: json
        body:
          text: "âœ… {{ app_name }} v{{ app_version }} éƒ¨ç½²åˆ° {{ environment }} æˆåŠŸ"
          attachments:
            - color: "good"
              fields:
                - title: "éƒ¨ç½²æ™‚é–“"
                  value: "{{ (ansible_date_time.epoch | int - deployment_start_time | int) }}ç§’"
                  short: true
                - title: "æ‡‰ç”¨ç¨‹å¼ URL"
                  value: "{{ app_url }}"
                  short: false
      when: health_check is succeeded

    # æ›´æ–°ç›£æ§ç³»çµ±
    - name: Update monitoring dashboard
      uri:
        url: "{{ grafana_api_url }}/api/annotations"
        method: POST
        headers:
          Authorization: "Bearer {{ grafana_token }}"
        body_format: json
        body:
          time: "{{ ansible_date_time.epoch | int * 1000 }}"
          text: "Deployed {{ app_name }} v{{ app_version }} to {{ environment }}"
          tags:
            - deployment
            - "{{ environment }}"
            - "{{ app_name }}"
```

## é—œéµå¯¦å‹™å¿ƒæ³•

### 1. å®‰å…¨æ€§æœ€ä½³å¯¦å‹™
- **ç§˜å¯†ç®¡ç†**ï¼šä½¿ç”¨ Jenkins Credentials æˆ– GitLab Variables ç®¡ç†æ•æ„Ÿè³‡è¨Š
- **æ¬Šé™æ§åˆ¶**ï¼šä¸åŒç’°å¢ƒä½¿ç”¨ä¸åŒçš„æœå‹™å¸³è™Ÿå’Œæ¬Šé™
- **ä»£ç¢¼æƒæ**ï¼šæ•´åˆå®‰å…¨æƒæå·¥å…·åˆ° Pipeline ä¸­
- **ç¨½æ ¸æ—¥èªŒ**ï¼šè¨˜éŒ„æ‰€æœ‰éƒ¨ç½²æ´»å‹•å’Œè®Šæ›´

### 2. å¯é æ€§ä¿è­‰
- **å›æ»¾æ©Ÿåˆ¶**ï¼šæ¯æ¬¡éƒ¨ç½²å‰æº–å‚™å¿«é€Ÿå›æ»¾æ–¹æ¡ˆ
- **å¥åº·æª¢æŸ¥**ï¼šéƒ¨ç½²å¾Œè‡ªå‹•é©—è­‰æ‡‰ç”¨ç¨‹å¼ç‹€æ…‹
- **æ¼¸é€²å¼éƒ¨ç½²**ï¼šä½¿ç”¨è—ç¶ æˆ–é‡‘çµ²é›€éƒ¨ç½²é™ä½é¢¨éšª
- **ç›£æ§å‘Šè­¦**ï¼šéƒ¨ç½²å¾Œå¯†åˆ‡ç›£æ§é—œéµæŒ‡æ¨™

### 3. æ•ˆèƒ½å„ªåŒ–
- **ä¸¦è¡ŒåŸ·è¡Œ**ï¼šåˆç†ä½¿ç”¨ Pipeline ä¸¦è¡ŒåŒ–æå‡æ•ˆç‡
- **å¿«å–æ©Ÿåˆ¶**ï¼šå–„ç”¨ Docker å±¤å¿«å–å’Œä¾è³´å¿«å–
- **è³‡æºç®¡ç†**ï¼šé©ç•¶åˆ†é… CI/CD åŸ·è¡Œè³‡æº
- **å¢é‡éƒ¨ç½²**ï¼šåªéƒ¨ç½²è®Šæ›´çš„çµ„ä»¶

### 4. åœ˜éšŠå”ä½œ
- **åˆ†æ”¯ç­–ç•¥**ï¼šå»ºç«‹æ¸…æ¥šçš„ Git åˆ†æ”¯å’Œç’°å¢ƒæ˜ å°„
- **å¯©æ ¸æµç¨‹**ï¼šç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²éœ€è¦äººå·¥å¯©æ ¸
- **é€šçŸ¥æ©Ÿåˆ¶**ï¼šåŠæ™‚é€šçŸ¥ç›¸é—œäººå“¡éƒ¨ç½²ç‹€æ…‹
- **æ–‡ä»¶ç¶­è­·**ï¼šä¿æŒ Pipeline é…ç½®å’Œæµç¨‹æ–‡ä»¶æ›´æ–°

## ä½œæ¥­ç·´ç¿’æ™‚é–“

### ç·´ç¿’ä¸€ï¼šJenkins Pipeline è¨­è¨ˆ
1. å»ºç«‹ä¸€å€‹ Jenkins Declarative Pipeline
2. æ•´åˆ Ansible Playbook åŸ·è¡Œ
3. æ·»åŠ åƒæ•¸åŒ–éƒ¨ç½²ï¼ˆç’°å¢ƒã€ç‰ˆæœ¬é¸æ“‡ï¼‰
4. è¨­å®šéƒ¨ç½²å¾Œé€šçŸ¥æ©Ÿåˆ¶

### ç·´ç¿’äºŒï¼šGitLab CI/CD é…ç½®
1. è¨­è¨ˆå®Œæ•´çš„ `.gitlab-ci.yml` é…ç½®
2. å¯¦ä½œå¤šéšæ®µéƒ¨ç½²æµç¨‹ï¼ˆdev â†’ staging â†’ prodï¼‰
3. æ•´åˆè‡ªå‹•åŒ–æ¸¬è©¦å’Œé©—è­‰
4. é…ç½®ç’°å¢ƒè®Šæ•¸å’Œç§˜å¯†ç®¡ç†

### ç·´ç¿’ä¸‰ï¼šè—ç¶ éƒ¨ç½²å¯¦ä½œ
1. è¨­è¨ˆè—ç¶ éƒ¨ç½²çš„ Ansible Playbook
2. æ•´åˆåˆ° CI/CD Pipeline ä¸­
3. å¯¦ä½œè‡ªå‹•åŒ–å¥åº·æª¢æŸ¥å’Œæµé‡åˆ‡æ›
4. è¨­è¨ˆå›æ»¾æ©Ÿåˆ¶

### ç·´ç¿’å››ï¼šAPI æ•´åˆæ‡‰ç”¨
1. åœ¨éƒ¨ç½²æµç¨‹ä¸­æ•´åˆ Slack é€šçŸ¥
2. å¯¦ä½œèˆ‡å…¶ä»–ç³»çµ±çš„ API æ•´åˆ
3. è¨­è¨ˆéƒ¨ç½²ç‹€æ…‹çš„ç›£æ§å’Œè¿½è¹¤
4. å»ºç«‹éƒ¨ç½² Dashboard

## å¸¸è¦‹å•é¡Œæ’æŸ¥

### Q1: Pipeline åŸ·è¡Œæ¬Šé™å•é¡Œ
**å•é¡Œç¾è±¡ï¼š**
```
Permission denied (publickey)
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèª SSH é‡‘é‘°å·²æ­£ç¢ºé…ç½®åˆ° Jenkins/GitLab
- æª¢æŸ¥ç›®æ¨™ä¸»æ©Ÿçš„ SSH æ¬Šé™è¨­å®š
- ä½¿ç”¨ `ssh-agent` ç®¡ç†å¤šå€‹é‡‘é‘°
- é©—è­‰ `ansible_user` æ¬Šé™æ˜¯å¦è¶³å¤ 

### Q2: Ansible Vault å¯†ç¢¼å•é¡Œ
**å•é¡Œç¾è±¡ï¼š**
```
ERROR! Attempting to decrypt but no vault secrets found
```

**è§£æ±ºæ–¹æ¡ˆï¼š**
- ç¢ºèª Vault å¯†ç¢¼å·²è¨­å®šç‚ºç’°å¢ƒè®Šæ•¸æˆ–æª”æ¡ˆ
- æª¢æŸ¥ `--vault-password-file` è·¯å¾‘æ˜¯å¦æ­£ç¢º
- ä½¿ç”¨ Jenkins Credentials ç®¡ç† Vault å¯†ç¢¼
- é©—è­‰ Vault æª”æ¡ˆæ˜¯å¦å·²æ­£ç¢ºåŠ å¯†

### Q3: éƒ¨ç½²å¡ä½æˆ–è¶…æ™‚
**å•é¡Œç¾è±¡ï¼š**
Pipeline åŸ·è¡Œæ™‚é–“éé•·æˆ–ç„¡éŸ¿æ‡‰

**è§£æ±ºæ–¹æ¡ˆï¼š**
- è¨­å®šé©ç•¶çš„è¶…æ™‚æ™‚é–“
- æª¢æŸ¥ç¶²è·¯é€£æ¥å’Œé˜²ç«ç‰†è¨­å®š
- ä½¿ç”¨ `async` å’Œ `poll` è™•ç†é•·æ™‚é–“ä»»å‹™
- å„ªåŒ– Playbook åŸ·è¡Œæ•ˆç‡

### Q4: ç’°å¢ƒé–“é…ç½®è¡çª
**å•é¡Œç¾è±¡ï¼š**
ä¸åŒç’°å¢ƒçš„éƒ¨ç½²çµæœä¸ä¸€è‡´

**è§£æ±ºæ–¹æ¡ˆï¼š**
- æª¢æŸ¥ç’°å¢ƒè®Šæ•¸å’Œ group_vars é…ç½®
- ç¢ºä¿ Inventory æª”æ¡ˆæ­£ç¢ºåˆ†é›¢
- ä½¿ç”¨æ¢ä»¶åˆ¤æ–·è™•ç†ç’°å¢ƒå·®ç•°
- å»ºç«‹ç’°å¢ƒé…ç½®é©—è­‰æ©Ÿåˆ¶

## æ˜æ—¥é å‘Š
> æ˜å¤©ä¾†èŠèŠç›£æ§
